files:
  "/etc/healthd/url_responder.conf":
    mode: "000644"
    owner: root
    group: root
    content: |
      /health.php: /health.php
      
  "/var/www/html/public/health.php":
    mode: "000644"
    owner: webapp
    group: webapp
    content: |
      <?php
      require_once '../config/database.php';
      header('Content-Type: application/json');
      
      try {
          $database = new Database();
          if ($database->testConnection()) {
              http_response_code(200);
              echo json_encode(['status' => 'ok', 'database' => 'connected']);
          } else {
              http_response_code(503);
              echo json_encode(['status' => 'error', 'database' => 'disconnected']);
          }
      } catch (Exception $e) {
          http_response_code(503);
          echo json_encode(['status' => 'error', 'message' => 'Service unavailable']);
      }
      ?>
